@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<form id="vue-start">

    <div class="form-group">
        <label for="exampleInputEmail1">Country</label>
        <select class="form-control" v-model="country">
            <option value="1">Canada</option>
            <option value="2">Afghanistan</option>
            <option value="3">Albania</option>
            <option value="4">Algeria</option>
            <option value="5">Andorra</option>
            <option value="6">Angola</option>
            <option value="7">Antigua and Barbuda</option>
            <option value="8">Argentina</option>
            <option value="9">Armenia</option>
            <option value="10">Australia</option>
            <option value="11">Austria</option>
            <option value="12">Azerbaijan</option>
            <option value="13">The Bahamas</option>
            <option value="14">Bahrain</option>
            <option value="15">Bangladesh</option>
            <option value="16">Barbados</option>
            <option value="17">Belarus</option>
            <option value="18">Belgium</option>
            <option value="19">Belize</option>
            <option value="20">Benin</option>
            <option value="21">Bhutan</option>
            <option value="22">Bolivia</option>
            <option value="23">Bosnia and Herzegovina</option>
            <option value="24">Botswana</option>
            <option value="25">Brazil</option>
            <option value="26">Brunei</option>
            <option value="27">Bulgaria</option>
            <option value="28">Burkina Faso</option>
            <option value="29">Burundi</option>
            <option value="30">Cabo Verde</option>
            <option value="31">Cambodia</option>
            <option value="32">Cameroon</option>
            <option value="33">Canada</option>
            <option value="34">Central African Republic</option>
            <option value="35">Chad</option>
            <option value="36">Chile</option>
            <option value="37">China</option>
            <option value="38">Colombia</option>
            <option value="39">Comoros</option>
            <option value="40">Congo, Democratic Republic of the</option>
            <option value="41">Congo, Republic of the</option>
            <option value="42">Costa Rica</option>
            <option value="43">Côte d’Ivoire</option>
            <option value="44">Croatia</option>
            <option value="45">Cuba</option>
            <option value="46">Cyprus</option>
            <option value="47">Czech Republic</option>
            <option value="48">Denmark</option>
            <option value="49">Djibouti</option>
            <option value="50">Dominica</option>
            <option value="51">Dominican Republic</option>
            <option value="52">East Timor (Timor-Leste)</option>
            <option value="53">Ecuador</option>
            <option value="54">Egypt</option>
            <option value="55">El Salvador</option>
            <option value="56">Equatorial Guinea</option>
            <option value="57">Eritrea</option>
            <option value="58">Estonia</option>
            <option value="59">Eswatini</option>
            <option value="60">Ethiopia</option>
            <option value="61">Fiji</option>
            <option value="62">Finland</option>
            <option value="63">France</option>
            <option value="64">Gabon</option>
            <option value="65">The Gambia</option>
            <option value="66">Georgia</option>
            <option value="67">Germany</option>
            <option value="68">Ghana</option>
            <option value="69">Greece</option>
            <option value="70">Grenada</option>
            <option value="71">Guatemala</option>
            <option value="72">Guinea</option>
            <option value="73">Guinea-Bissau</option>
            <option value="74">Guyana</option>
            <option value="75">Haiti</option>
            <option value="76">Honduras</option>
            <option value="77">Hungary</option>
            <option value="78">Iceland</option>
            <option value="79">India</option>
            <option value="80">Indonesia</option>
            <option value="81">Iran</option>
            <option value="82">Iraq</option>
            <option value="83">Ireland</option>
            <option value="84">Israel</option>
            <option value="85">Italy</option>
            <option value="86">Jamaica</option>
            <option value="87">Japan</option>
            <option value="88">Jordan</option>
            <option value="89">Kazakhstan</option>
            <option value="90">Kenya</option>
            <option value="91">Kiribati</option>
            <option value="92">Korea, North</option>
            <option value="93">Korea, South</option>
            <option value="94">Kosovo</option>
            <option value="95">Kuwait</option>
            <option value="96">Kyrgyzstan</option>
            <option value="97">Laos</option>
            <option value="98">Latvia</option>
            <option value="99">Lebanon</option>
            <option value="100">Lesotho</option>
            <option value="101">Liberia</option>
            <option value="102">Libya</option>
            <option value="103">Liechtenstein</option>
            <option value="104">Lithuania</option>
            <option value="105">Luxembourg</option>
            <option value="106">Madagascar</option>
            <option value="107">Malawi</option>
            <option value="108">Malaysia</option>
            <option value="109">Maldives</option>
            <option value="110">Mali</option>
            <option value="111">Malta</option>
            <option value="112">Marshall Islands</option>
            <option value="113">Mauritania</option>
            <option value="114">Mauritius</option>
            <option value="115">Mexico</option>
            <option value="116">Micronesia, Federated States of</option>
            <option value="117">Moldova</option>
            <option value="118">Monaco</option>
            <option value="119">Mongolia</option>
            <option value="120">Montenegro</option>
            <option value="121">Morocco</option>
            <option value="122">Mozambique</option>
            <option value="123">Myanmar (Burma)</option>
            <option value="124">Namibia</option>
            <option value="125">Nauru</option>
            <option value="126">Nepal</option>
            <option value="127">Netherlands</option>
            <option value="128">New Zealand</option>
            <option value="129">Nicaragua</option>
            <option value="130">Niger</option>
            <option value="131">Nigeria</option>
            <option value="132">North Macedonia</option>
            <option value="133">Norway</option>
            <option value="134">Oman</option>
            <option value="135">Pakistan</option>
            <option value="136">Palau</option>
            <option value="137">Panama</option>
            <option value="138">Papua New Guinea</option>
            <option value="139">Paraguay</option>
            <option value="140">Peru</option>
            <option value="141">Philippines</option>
            <option value="142">Poland</option>
            <option value="143">Portugal</option>
            <option value="144">Qatar</option>
            <option value="145">Romania</option>
            <option value="146">Russia</option>
            <option value="147">Rwanda</option>
            <option value="148">Saint Kitts and Nevis</option>
            <option value="149">Saint Lucia</option>
            <option value="150">Saint Vincent and the Grenadines</option>
            <option value="151">Samoa</option>
            <option value="152">San Marino</option>
            <option value="153">Sao Tome and Principe</option>
            <option value="154">Saudi Arabia</option>
            <option value="155">Senegal</option>
            <option value="156">Serbia</option>
            <option value="157">Seychelles</option>
            <option value="158">Sierra Leone</option>
            <option value="159">Singapore</option>
            <option value="160">Slovakia</option>
            <option value="161">Slovenia</option>
            <option value="162">Solomon Islands</option>
            <option value="163">Somalia</option>
            <option value="164">South Africa</option>
            <option value="165">Spain</option>
            <option value="166">Sri Lanka</option>
            <option value="167">Sudan</option>
            <option value="168">Sudan, South</option>
            <option value="169">Suriname</option>
            <option value="170">Sweden</option>
            <option value="171">Switzerland</option>
            <option value="172">Syria</option>
            <option value="173">Taiwan</option>
            <option value="174">Tajikistan</option>
            <option value="175">Tanzania</option>
            <option value="176">Thailand</option>
            <option value="177">Togo</option>
            <option value="178">Tonga</option>
            <option value="179">Trinidad and Tobago</option>
            <option value="180">Tunisia</option>
            <option value="181">Turkey</option>
            <option value="182">Turkmenistan</option>
            <option value="183">Tuvalu</option>
            <option value="184">Uganda</option>
            <option value="185">Ukraine</option>
            <option value="186">United Arab Emirates</option>
            <option value="187">United Kingdom</option>
            <option value="188">United States</option>
            <option value="189">Uruguay</option>
            <option value="190">Uzbekistan</option>
            <option value="191">Vanuatu</option>
            <option value="192">Vatican City</option>
            <option value="193">Venezuela</option>
            <option value="194">Vietnam</option>
            <option value="195">Yemen</option>
            <option value="196">Zambia</option>
            <option value="197">Zimbabwe</option>
        </select>
    </div>
    <div class="form-group">
        <label>Color</label>
        <select class="form-control" v-model="color" v-on:change="getPets">
            <option value="1">Red</option>
            <option value="2">Blue</option>
            <option value="3">Yellow</option>
            <option value="4">Pink</option>
        </select>
    </div>
    <div class="form-group">
        <label>Favorite Pet</label>
        <select class="form-control">
            <optgroup label="Popular">
                <option >{{predictedPet}}</option>
            </optgroup>
            <optgroup label="All">
                <option v-for="item in pets">{{item}}</option>
            </optgroup>
        </select>
    </div>
</form>

@section Scripts {

<script>
    var app = new Vue({
        el: '#vue-start',
        data: {
            country: "",
            color: "",
            pets: [],
            predictedPet :""
        }, 
        methods: {
            async getPets() {
                var result = await (await fetch(`/api/pets?countryId=${this.country}&colorId=${this.color}`)).json();
                this.predictedPet = result.items[result.predicted];
                this.pets = result.items;
            }
        }
    });
</script>

    }